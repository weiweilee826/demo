{"version":3,"file":"js/1.733b5b7c.js","mappings":"oOAGAA,eAAeC,EAAWC,GACxB,IAAIC,EACJ,MAAMC,EAAO,8DAA4EF,IAMzF,aALMG,EAAAA,EAAAA,IAAUD,GAAKE,MAAMC,IACrBA,EAASC,KAAKC,UAChBN,EAAUI,EAASC,KAAKL,QAC1B,IAEKA,CACT,CAEAH,eAAeU,EAAUC,EAAYC,GACnC,IAAIC,EACJ,MAAML,EAAO,CAAEG,aAAYC,OACrBR,EAAO,0DAIb,aAHMC,EAAAA,EAAAA,KAAWD,EAAK,CAAEI,SAAQF,MAAMC,IACpCM,EAAMN,EAASC,KAAKC,OAAO,IAEtBI,CACT,CAEAb,eAAec,IACb,IAAID,EACJ,MAAMT,EAAO,0DAIb,aAHMC,EAAAA,EAAAA,IAAUD,GAAKE,MAAMC,IACzBM,EAAMN,EAASC,KAAKA,KAAKO,KAAK,IAEzBF,CACT,CAEA,SAASG,EAAWd,GAClB,IAAIW,EACJ,MAAMT,EAAO,2DAAyEF,IAItF,OAHAG,EAAAA,EAAAA,UAAaD,GAAKE,MAAMC,IACtBM,EAAMN,CAAQ,IAETM,CACT,C,+GCvCOI,MAAM,qB,GACTC,EAAAA,EAAAA,GAAmC,MAA/BD,MAAM,iBAAgB,QAAI,G,SACzBA,MAAM,e,GACTC,EAAAA,EAAAA,GAA0C,KAAvCD,MAAM,sBAAqB,YAAQ,G,GAEnCC,EAAAA,EAAAA,GAMQ,UALPC,KAAK,SACLF,MAAM,2DACNG,MAAA,iBACD,UAED,G,aAIKH,MAAM,c,GACXC,EAAAA,EAAAA,GAQQ,SARDD,MAAM,cAAY,EACvBC,EAAAA,EAAAA,GAMK,YALHA,EAAAA,EAAAA,GAAsB,MAAlBG,MAAM,UACVH,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAuB,MAAnBG,MAAM,OAAM,OAChBH,EAAAA,EAAAA,GAAuB,MAAnBG,MAAM,OAAM,OAChBH,EAAAA,EAAAA,GAAuB,MAAnBG,MAAM,OAAM,UAAE,G,GAIfJ,MAAM,c,aAULA,MAAM,gB,GAIRC,EAAAA,EAAAA,GAAM,mB,iBAWJD,MAAM,8B,GAGNA,MAAM,gB,oDAYNA,MAAM,yB,GAKVC,EAAAA,EAAAA,GAAqB,MAAjBI,QAAQ,KAAG,S,GACXA,QAAQ,IAAIL,MAAM,Q,GACfA,MAAM,e,GAkBXA,MAAM,Y,GACJK,QAAQ,IAAIL,MAAM,iB,GACjBA,MAAM,W,GACkCC,EAAAA,EAAAA,GAAM,mB,GAAAA,EAAAA,EAAAA,GAAM,mB,GAO1DD,MAAM,iB,GAENC,EAAAA,EAAAA,GAKQ,UAJPC,KAAK,SACLF,MAAM,8CACP,UAED,G,0GA5GRM,EAAAA,EAAAA,IAgHM,MAhHNC,EAgHM,CA/GJC,EAC+C,GAAhBC,EAAAA,MAAMC,SAAM,WAA3CJ,EAAAA,EAAAA,IAWM,MAXNK,EAWM,CAVJC,GACAC,EAAAA,EAAAA,IAQCC,EAAAA,CARYC,GAAG,aAAW,C,kBACxB,IAMQ,CANRC,K,sBASLV,EAAAA,EAAAA,IAiGM,UAhGJL,EAAAA,EAAAA,GAqFQ,QArFRgB,EAqFQ,CApFNC,GAUAjB,EAAAA,EAAAA,GAyEQ,QAzERkB,EAyEQ,gBAxENb,EAAAA,EAAAA,IA0CKc,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IA1CcX,EAAAA,OAARY,K,WAAXf,EAAAA,EAAAA,IA0CK,MA1CsBgB,IAAKD,EAAKpC,I,EACnCgB,EAAAA,EAAAA,GAOK,YANHA,EAAAA,EAAAA,GAKE,OAJAD,MAAM,YACLuB,IAAKF,EAAKnC,QAAQsC,SACnBrB,MAAA,kBACAsB,IAAI,I,aAGRxB,EAAAA,EAAAA,GAaK,KAbLyB,EAaK,EAZHb,EAAAA,EAAAA,IAECC,EAAAA,CAFaC,GAAE,YAAgBM,EAAK3B,Y,mBACnC,IAAwB,mBAArB2B,EAAKnC,QAAQyC,OAAK,M,kBAEvBC,GACA3B,EAAAA,EAAAA,GAOS,UANPC,KAAK,SACLF,MAAM,4CACNG,MAAA,sBACC0B,QAAK,GAAEC,EAAAA,WAAWT,EAAKpC,K,EAExB4B,EAAAA,EAAAA,IAA8CkB,EAAAA,CAA3BC,KAAK,uBAAmB,QAAG,SAChD,QAGF/B,EAAAA,EAAAA,GAEK,KAFLgC,GAEK,QADAC,EAAAA,SAASC,YAAYd,EAAKnC,QAAQkD,QAAK,IAE5CnC,EAAAA,EAAAA,GAWK,KAXLoC,EAWK,WAVHpC,EAAAA,EAAAA,GASS,UARPD,MAAM,cACN,aAAW,yB,yBACFqB,EAAK1B,IAAG,EAChB2C,SAAM,GAAER,EAAAA,WAAWT,I,cAEpBf,EAAAA,EAAAA,IAESc,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAFe,IAATmB,IAAftC,EAAAA,EAAAA,GAES,UAFoBqB,IAAKiB,EAAQC,MAAOD,I,QAC5CA,GAAK,O,mBAJDlB,EAAK1B,UAQlBM,EAAAA,EAAAA,GAEK,KAFLwC,GAEK,QADAP,EAAAA,SAASC,YAAYd,EAAKnC,QAAQkD,MAAQf,EAAK1B,MAAG,Q,OAGzDM,EAAAA,EAAAA,GAoBK,WAnBHyC,GACAzC,EAAAA,EAAAA,GAiBK,KAjBL0C,EAiBK,EAhBH1C,EAAAA,EAAAA,GAeM,MAfN2C,EAeM,WAdJ3C,EAAAA,EAAAA,GAKE,SAJAC,KAAK,OACLF,MAAM,eACN6C,YAAY,gB,qCACHpC,EAAAA,OAAM,I,iBAANA,EAAAA,WAEXR,EAAAA,EAAAA,GAOS,UANPD,MAAM,wBACNE,KAAK,SACLjB,GAAG,gBACF4C,QAAK,eAAEC,EAAAA,cACT,kBAMP7B,EAAAA,EAAAA,GAOK,KAPL6C,EAOK,EANH7C,EAAAA,EAAAA,GAKK,KALL8C,EAKK,EAJH9C,EAAAA,EAAAA,GAGI,IAHJ+C,EAGI,UAHe,QACd,QAAGd,EAAAA,SAASC,YAAYL,EAAAA,aAAU,GAAImB,EAAM,GAAM,iBACjD,QAAGf,EAAAA,SAASC,YAAY1B,EAAAA,iBAAc,cAMpDR,EAAAA,EAAAA,GASM,MATNiD,EASM,EARJrC,EAAAA,EAAAA,IAOCC,EAAAA,CAPYC,GAAG,cAAY,C,kBACzB,IAKQ,CALRoC,K,2BAgBX,GACE5D,OACE,MAAO,CACLO,MAAO,GACPsD,aAAc,CAAC,EACfC,OAAQ,GACRC,eAAgB,EAEpB,EACAC,QAAS,CACPxE,gBACEyE,KAAK1D,YAAcD,EAAAA,EAAAA,MACnB2D,KAAKC,OAAOC,MAAMC,QAAUH,KAAK1D,MAAMY,OACvC8C,KAAKC,OAAOC,MAAM5D,MAAQ0D,KAAK1D,MAC/B8D,aAAaC,QAAQ,QAASC,KAAKC,UAAUP,KAAK1D,OACpD,EACAC,WAAWd,IACTc,EAAAA,EAAAA,IAAWd,GACXuE,KAAK3D,SACP,EACAmE,WAAW3C,GACTmC,KAAKzD,WAAWsB,EAAKpC,KACrBQ,EAAAA,EAAAA,IAAU4B,EAAK3B,WAAY2B,EAAK1B,IAClC,EACAsE,YACE,MAAM9E,EAAO,4DACb,IAAI+E,EAAO,CACT3E,KAAM,CACJ2E,KAAMV,KAAKH,SAGfG,KAAKW,MAAMC,KAAKjF,EAAK+E,GAAM7E,MAAMC,IAC/B+E,QAAQC,IAAI,QAAShF,GACrBkE,KAAKF,eAAiBhE,EAASC,KAAKA,KAAKgF,WAAW,GAExD,GAEFC,SAAU,CACRC,aACE,OAAOjB,KAAK1D,MAAM4E,QAAO,SAAUC,EAAKC,GACtC,OAAOD,EAAMC,EAAEjF,IAAMiF,EAAE1F,QAAQkD,KACjC,GAAG,EAEL,GAEFyC,UACErB,KAAK3D,SACP,G,QChKF,MAAMiF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://oats2022/./src/js/api.js","webpack://oats2022/./src/views/ShopCart.vue","webpack://oats2022/./src/views/ShopCart.vue?6454"],"sourcesContent":["import axios from \"axios\";\r\nexport { getProduct, addToCart, getCart, deleteCart };\r\n\r\nasync function getProduct(id) {\r\n  let product;\r\n  const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/product/${id}`;\r\n  await axios.get(url).then((response) => {\r\n    if (response.data.success) {\r\n      product = response.data.product;\r\n    }\r\n  });\r\n  return product;\r\n}\r\n\r\nasync function addToCart(product_id, qty) {\r\n  let res;\r\n  const data = { product_id, qty };\r\n  const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/cart`;\r\n  await axios.post(url, { data }).then((response) => {\r\n    res = response.data.success;\r\n  });\r\n  return res;\r\n}\r\n\r\nasync function getCart() {\r\n  let res;\r\n  const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/cart`;\r\n  await axios.get(url).then((response) => {\r\n    res = response.data.data.carts;\r\n  });\r\n  return res;\r\n}\r\n\r\nfunction deleteCart(id) {\r\n  let res;\r\n  const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/cart/${id}`;\r\n  axios.delete(url).then((response) => {\r\n    res = response;\r\n  });\r\n  return res;\r\n}\r\n","<template>\r\n  <div class=\"container content\">\r\n    <h1 class=\"title fw-bold\">CART</h1>\r\n    <div class=\"text-center\" v-if=\"carts.length == 0\">\r\n      <p class=\"fw-bold text-white\">您的購物車是空的</p>\r\n      <router-link to=\"/products\"\r\n        ><button\r\n          type=\"button\"\r\n          class=\"btn btn-outline-light checkout rounded-pill mt-5 fw-bold\"\r\n          style=\"width: 220px\"\r\n        >\r\n          繼續購物\r\n        </button></router-link\r\n      >\r\n    </div>\r\n    <div v-else>\r\n      <table class=\"table mt-4\">\r\n        <thead class=\"text-white\">\r\n          <tr>\r\n            <th width=\"80px\"></th>\r\n            <th>商品</th>\r\n            <th width=\"10%\">單價</th>\r\n            <th width=\"10%\">數量</th>\r\n            <th width=\"10%\">小計</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody class=\"text-white\">\r\n          <tr v-for=\"item in carts\" :key=\"item.id\">\r\n            <td>\r\n              <img\r\n                class=\"img-fluid\"\r\n                :src=\"item.product.imageUrl\"\r\n                style=\"margin: 10px 0\"\r\n                alt=\"\"\r\n              />\r\n            </td>\r\n            <td class=\"align-middle\">\r\n              <router-link :to=\"'/product/' + item.product_id\">\r\n                {{ item.product.title }}</router-link\r\n              >\r\n              <br />\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-light btn-sm rounded-pill\"\r\n                style=\"margin-top: 10px\"\r\n                @click=\"deleteCart(item.id)\"\r\n              >\r\n                <font-awesome-icon icon=\"fa-solid fa-trash\" /> 刪除\r\n              </button>\r\n            </td>\r\n\r\n            <td class=\"text-end pl-1 align-middle\">\r\n              {{ $filters.currencyUSD(item.product.price) }}\r\n            </td>\r\n            <td class=\"align-middle\">\r\n              <select\r\n                class=\"form-select\"\r\n                aria-label=\"Default select example\"\r\n                v-model=\"item.qty\"\r\n                @change=\"updatedQty(item)\"\r\n              >\r\n                <option v-for=\"index in 10\" :key=\"index\" :value=\"index\">\r\n                  {{ index }}\r\n                </option>\r\n              </select>\r\n            </td>\r\n            <td class=\"align-middle text-end\">\r\n              {{ $filters.currencyUSD(item.product.price * item.qty) }}\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\"2\"></td>\r\n            <td colspan=\"3\" class=\"py-3\">\r\n              <div class=\"input-group\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"折扣輸入【ten%off】\"\r\n                  v-model=\"coupon\"\r\n                />\r\n                <button\r\n                  class=\"btn btn-outline-light\"\r\n                  type=\"button\"\r\n                  id=\"button-addon2\"\r\n                  @click=\"useCoupon()\"\r\n                >\r\n                  套用優惠券\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr class=\"border_x\">\r\n            <td colspan=\"5\" class=\"text-end py-3\">\r\n              <p class=\"fw-bold\">\r\n                總計 {{ $filters.currencyUSD(countTotal) }}<br /><br />\r\n                折扣價 {{ $filters.currencyUSD(discount_total) }}\r\n              </p>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"text-end mt-3\">\r\n        <router-link to=\"/cart_info\"\r\n          ><button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-light text-center checkout\"\r\n          >\r\n            前往結帳\r\n          </button></router-link\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { addToCart, getCart, deleteCart } from \"@/js/api.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      carts: [],\r\n      products_qty: {},\r\n      coupon: \"\",\r\n      discount_total: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    async getCart() {\r\n      this.carts = await getCart();\r\n      this.$store.state.cartNum = this.carts.length;\r\n      this.$store.state.carts = this.carts;\r\n      localStorage.setItem(\"carts\", JSON.stringify(this.carts));\r\n    },\r\n    deleteCart(id) {\r\n      deleteCart(id);\r\n      this.getCart();\r\n    },\r\n    updatedQty(item) {\r\n      this.deleteCart(item.id);\r\n      addToCart(item.product_id, item.qty);\r\n    },\r\n    useCoupon() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/coupon`;\r\n      let code = {\r\n        data: {\r\n          code: this.coupon,\r\n        },\r\n      };\r\n      this.$http.post(url, code).then((response) => {\r\n        console.log(\"套用優惠券\", response);\r\n        this.discount_total = response.data.data.final_total;\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    countTotal() {\r\n      return this.carts.reduce(function (sum, c) {\r\n        return sum + c.qty * c.product.price;\r\n      }, 0);\r\n      \r\n    },\r\n  },\r\n  created() {\r\n    this.getCart();\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.content {\r\n  margin-top: 50px;\r\n  background-color: #ec6d4e;\r\n  padding-top: 100px;\r\n  /* height: 671px; */\r\n}\r\n.title {\r\n  font-weight: 500;\r\n  font-style: normal;\r\n  font-size: 50px;\r\n  line-height: 1;\r\n  letter-spacing: 10px;\r\n  color: #fff;\r\n  text-align: center;\r\n  margin: 0px auto 60px;\r\n  padding-top: 100px;\r\n  overflow: hidden;\r\n}\r\na {\r\n  text-decoration: none;\r\n  color: white;\r\n}\r\n.border_x > td {\r\n  border-style: none;\r\n}\r\n.checkout {\r\n  width: 200px;\r\n  height: 50px;\r\n  color: #ec6d4e;\r\n  font-weight: bold;\r\n  background-color: #fff;\r\n}\r\n.checkout:hover {\r\n  color: #fff;\r\n  background-color: #ec6d4e;\r\n  border: 2px solid #fff;\r\n}\r\n</style>\r\n","import { render } from \"./ShopCart.vue?vue&type=template&id=2e76695b\"\nimport script from \"./ShopCart.vue?vue&type=script&lang=js\"\nexport * from \"./ShopCart.vue?vue&type=script&lang=js\"\n\nimport \"./ShopCart.vue?vue&type=style&index=0&id=2e76695b&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\pc\\\\Desktop\\\\Oats2022\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["async","getProduct","id","product","url","axios","then","response","data","success","addToCart","product_id","qty","res","getCart","carts","deleteCart","class","_createElementVNode","type","style","width","colspan","_createElementBlock","_hoisted_1","_hoisted_2","$data","length","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","to","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","item","key","src","imageUrl","alt","_hoisted_11","title","_hoisted_12","onClick","$options","_component_font_awesome_icon","icon","_hoisted_14","_ctx","currencyUSD","price","_hoisted_15","onChange","index","value","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","placeholder","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","products_qty","coupon","discount_total","methods","this","$store","state","cartNum","localStorage","setItem","JSON","stringify","updatedQty","useCoupon","code","$http","post","console","log","final_total","computed","countTotal","reduce","sum","c","created","__exports__","render"],"sourceRoot":""}
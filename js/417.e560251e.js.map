{"version":3,"file":"js/417.e560251e.js","mappings":"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","sources":["webpack://oats2022/./src/views/OrderList.vue","webpack://oats2022/./src/views/OrderList.vue?7649"],"sourcesContent":[" <template>\r\n    <div class=\"container-fluid\">\r\n      <div class=\"container\">\r\n        <table class=\"table mt-4\">\r\n          <thead>\r\n            <tr class=\"text-center\">\r\n              <th>購買時間</th>\r\n              <th>Email</th>\r\n              <th>購買款項</th>\r\n              <th>購買金額</th>\r\n              <th>是否付款</th>\r\n              <th>編輯</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in orders\" :key=\"item.id\" class=\"text-center\">\r\n              <td>{{ item.create_at }}</td>\r\n              <td>{{ item.email }}</td>\r\n              <td class=\"text-start\" v-html=\"item.product\"></td>\r\n              <td class=\"text-end\">{{ $filters.currencyUSD(item.total) }}</td>\r\n              <td v-if=\"item.is_paid\">已付款</td>\r\n              <td v-else>未付款</td>\r\n              <td class=\"text-center\">\r\n                <button class=\"btn btn-outline-dark\" @click=\"openModal(item)\">\r\n                  編輯\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <!-- pagination -->\r\n        <PagiNation\r\n          :pagination=\"pagination\"\r\n          @getProducts=\"getOrderList\"\r\n        ></PagiNation>\r\n      </div>\r\n\r\n      <!-- 編輯訂單 Modal -->\r\n      <div\r\n        class=\"modal fade\"\r\n        id=\"orderModal\"\r\n        tabindex=\"-1\"\r\n        role=\"dialog\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n          <div class=\"modal-content border-0\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n                <span>編輯訂單</span>\r\n              </h5>\r\n            </div>\r\n\r\n            <div class=\"modal-body row\">\r\n              <div class=\"col-8\">\r\n                <div class=\"form-floating mb-3\">\r\n                  <input\r\n                    type=\"date\"\r\n                    class=\"form-control\"\r\n                    id=\"date\"\r\n                    name=\"date\"\r\n                    v-model=\"tempOrder.create_at\"\r\n                  />\r\n                  <label for=\"floatingInput\">購買時間</label>\r\n                </div>\r\n\r\n                <div class=\"col-6\">\r\n                  <div class=\"form-floating mb-3\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      id=\"floatingInput\"\r\n                      v-model=\"tempOrder.email\"\r\n                    />\r\n                    <label for=\"floatingInput\">Email</label>\r\n                  </div>\r\n\r\n                  <div class=\"form-floating mb-3\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      id=\"floatingInput\"\r\n                      v-model=\"tempOrder.product\"\r\n                    />\r\n                    <label for=\"floatingInput\">購買款項</label>\r\n                  </div>\r\n\r\n                  <div class=\"form-floating mb-3\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      id=\"floatingPassword\"\r\n                      v-model=\"tempOrder.total\"\r\n                    />\r\n                    <label for=\"floatingInput\">購買金額</label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"form-check form-switch text-start\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    id=\"flexSwitchCheckDefault\"\r\n                    v-model=\"tempOrder.is_paid\"\r\n                  />\r\n                  <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\"\r\n                    >是否付款</label\r\n                  >\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary\"\r\n                @click=\"updateOrder\"\r\n              >\r\n                確認\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport PagiNation from \"@/components/PagiNation.vue\";\r\nimport { Modal } from \"bootstrap\";\r\n\r\nexport default {\r\n  components: {\r\n    PagiNation,\r\n  },\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      pagination: {},\r\n      myModal: {},\r\n      tempOrder: {},\r\n    };\r\n  },\r\n  methods: {\r\n    getOrderList(page = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/orders?page=${page}`;\r\n      this.$http.get(api).then((response) => {\r\n        // console.log(\"getOrderList\", response);\r\n        this.orders = [];\r\n        for (let order of response.data.orders) {\r\n          let myorder = {\r\n            id: order.id,\r\n            create_at: new Date(order.create_at).toLocaleString(),\r\n            email: order.email,\r\n            is_paid: order.is_paid,\r\n            total: order.total,\r\n          };\r\n\r\n          let str = \"\";\r\n          for (let product of Object.values(order.products)) {\r\n            str += `${product.product.title} ： ${product.qty}包 <br>`;\r\n          }\r\n          myorder.product = str;\r\n          this.orders.push(myorder);\r\n        }\r\n        this.pagination = response.data.pagination;\r\n      });\r\n    },\r\n    openModal(item) {\r\n      this.tempOrder = Object.assign({}, item);\r\n      // console.log(\"tempOrder\", this.tempOrder);\r\n      this.myModal.show();\r\n    },\r\n    updateOrder() {\r\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/order/${this.tempOrder.id}`;\r\n\r\n      this.$http.put(api, { data: this.tempOrder }).then((response) => {\r\n        // console.log(\"updateOrder\", response);\r\n        if (response.data.success) {\r\n          this.myModal.hide();\r\n          this.getOrderList();\r\n        }\r\n      });\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.myModal = new Modal(\"#orderModal\", {});\r\n  },\r\n  created() {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    if (token !== \"\") {\r\n      this.axios.defaults.headers.common[\"Authorization\"] = token;\r\n      this.getOrderList();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  margin-top: 100px;\r\n  border-radius: 10px;\r\n  background-color: white;\r\n  padding: 50px;\r\n}\r\n</style>\r\n","import { render } from \"./OrderList.vue?vue&type=template&id=38b71c36\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=38b71c36&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\pc\\\\Desktop\\\\Oats2022\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","tabindex","role","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","$data","item","key","create_at","email","innerHTML","product","_hoisted_6","_ctx","currencyUSD","total","is_paid","_hoisted_9","onClick","$options","_createVNode","_component_PagiNation","pagination","onGetProducts","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","type","name","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","components","PagiNation","data","orders","myModal","tempOrder","methods","getOrderList","page","api","this","$http","get","then","response","order","myorder","Date","toLocaleString","str","Object","values","products","title","qty","push","openModal","assign","show","updateOrder","put","success","hide","mounted","Modal","created","token","document","cookie","replace","axios","defaults","headers","common","__exports__","render"],"sourceRoot":""}
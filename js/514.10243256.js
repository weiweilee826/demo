"use strict";(self["webpackChunkoats2022"]=self["webpackChunkoats2022"]||[]).push([[514],{8649:function(t,e,o){o.r(e),o.d(e,{default:function(){return tt}});var l=o(3396),a=o(7139),i=o(9242);const n={class:"container-fluid content"},s={class:"container"},d={class:"text-end"},c={class:"table mt-4"},r=(0,l._)("thead",null,[(0,l._)("tr",{class:"text-center"},[(0,l._)("th",{width:"10%"}),(0,l._)("th",{width:"30%"},"商品"),(0,l._)("th",null,"原價"),(0,l._)("th",null,"售價"),(0,l._)("th",null,"是否啟用"),(0,l._)("th",null,"編輯"),(0,l._)("th",null,"刪除")])],-1),u=["src"],p={key:0,class:"text-end"},m={key:1,class:"text-end"},h={key:2,class:"text-end"},f={key:3,class:"text-end"},g={key:4,class:"text-center"},_={key:5,class:"text-center"},w={class:"text-center"},b=["onClick"],P={class:"text-center"},x=["onClick"],y={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},v={class:"modal-dialog modal-lg",role:"document"},k={class:"modal-content border-0"},U=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,l._)("span",null,"商品資訊")])],-1),D={class:"modal-body row"},$={class:"col-4"},C={class:"form-floating mb-3"},M=(0,l._)("label",{for:"floatingInput"},"圖片網址",-1),I=["src"],V={class:"col-8"},z={class:"form-floating mb-3"},N=(0,l._)("label",{for:"floatingInput"},"商品",-1),S={class:"col-6"},T={class:"form-floating mb-3"},F=(0,l._)("label",{for:"floatingInput"},"單位",-1),G={class:"form-floating mb-3"},L=(0,l._)("label",{for:"floatingInput"},"原價",-1),Z={class:"form-floating mb-3"},j=(0,l._)("label",{for:"floatingInput"},"售價",-1),A={class:"form-floating mb-3"},H=(0,l._)("label",{for:"floatingTextarea"},"原料標示",-1),K={class:"form-floating mb-3"},O=(0,l._)("label",{for:"floatingTextarea"},"營養標示",-1),W={class:"form-check form-switch text-start"},Y=(0,l._)("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"是否啟用",-1),q={class:"modal-footer"};function B(t,e,o,B,E,J){const Q=(0,l.up)("PagiNation");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",s,[(0,l._)("div",d,[(0,l._)("button",{class:"btn btn-dark",onClick:e[0]||(e[0]=t=>J.openModal(!0))}," 新增商品 ")]),(0,l._)("table",c,[r,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(E.products,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("img",{class:"img-fluid rounded",src:e.imageUrl,alt:""},null,8,u)]),(0,l._)("td",null,(0,a.zw)(e.title),1),void 0!==e.origin_price?((0,l.wg)(),(0,l.iD)("td",p,(0,a.zw)(t.$filters.currencyUSD(e.origin_price)),1)):((0,l.wg)(),(0,l.iD)("td",m,(0,a.zw)(t.$filters.currencyUSD(0)),1)),void 0!==e.price?((0,l.wg)(),(0,l.iD)("td",h,(0,a.zw)(t.$filters.currencyUSD(e.price)),1)):((0,l.wg)(),(0,l.iD)("td",f,(0,a.zw)(t.$filters.currencyUSD(0)),1)),e.is_enabled?((0,l.wg)(),(0,l.iD)("td",g,"已啟用")):((0,l.wg)(),(0,l.iD)("td",_,"未啟用")),(0,l._)("td",w,[(0,l._)("button",{class:"btn btn-outline-dark",onClick:t=>J.openModal(!1,e)}," 編輯 ",8,b)]),(0,l._)("td",P,[(0,l._)("button",{class:"btn btn-outline-danger",onClick:t=>J.deleteProduct(e.id)}," 刪除 ",8,x)])])))),128))])]),(0,l.Wm)(Q,{pagination:E.pagination,onGetProducts:J.getProducts},null,8,["pagination","onGetProducts"]),(0,l._)("div",y,[(0,l._)("div",v,[(0,l._)("div",k,[U,(0,l._)("div",D,[(0,l._)("div",$,[(0,l._)("div",C,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingInput","onUpdate:modelValue":e[1]||(e[1]=t=>E.tempProduct.imageUrl=t)},null,512),[[i.nr,E.tempProduct.imageUrl]]),M]),(0,l._)("input",{type:"file",class:"form-control",id:"inputGroupFile01",ref:"files",onChange:e[2]||(e[2]=t=>J.uploadFile(t))},null,544),(0,l._)("img",{class:"img-fluid mt-3",src:E.tempProduct.imageUrl,alt:""},null,8,I)]),(0,l._)("div",V,[(0,l._)("div",z,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入商品名稱","onUpdate:modelValue":e[3]||(e[3]=t=>E.tempProduct.title=t)},null,512),[[i.nr,E.tempProduct.title]]),N]),(0,l._)("div",S,[(0,l._)("div",T,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入單位","onUpdate:modelValue":e[4]||(e[4]=t=>E.tempProduct.unit=t)},null,512),[[i.nr,E.tempProduct.unit]]),F]),(0,l._)("div",G,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入原價","onUpdate:modelValue":e[5]||(e[5]=t=>E.tempProduct.origin_price=t)},null,512),[[i.nr,E.tempProduct.origin_price]]),L]),(0,l._)("div",Z,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"floatingPassword",placeholder:"請輸入售價","onUpdate:modelValue":e[6]||(e[6]=t=>E.tempProduct.price=t)},null,512),[[i.nr,E.tempProduct.price]]),j])]),(0,l._)("div",A,[(0,l.wy)((0,l._)("textarea",{class:"form-control",placeholder:"請輸入原料標示",id:"floatingTextarea","onUpdate:modelValue":e[7]||(e[7]=t=>E.tempProduct.description=t),style:{height:"100px"}},null,512),[[i.nr,E.tempProduct.description]]),H]),(0,l._)("div",K,[(0,l.wy)((0,l._)("textarea",{class:"form-control",placeholder:"請輸入營養標示",id:"floatingTextarea","onUpdate:modelValue":e[8]||(e[8]=t=>E.tempProduct.content=t),style:{height:"100px"}},null,512),[[i.nr,E.tempProduct.content]]),O]),(0,l._)("div",W,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[9]||(e[9]=t=>E.tempProduct.is_enabled=t)},null,512),[[i.e8,E.tempProduct.is_enabled]]),Y])])]),(0,l._)("div",q,[(0,l._)("button",{type:"button",class:"btn btn-dark",onClick:e[10]||(e[10]=(...t)=>J.updateProduct&&J.updateProduct(...t))}," 確認 ")])])])])])])}var E=o(7208),J=o(2166),Q={components:{PagiNation:E.Z},data(){return{products:[],tempProduct:{},myModal:{},isNew:!1,status:{fileUploading:!1},checked:!0,pagination:{}}},methods:{getProducts(t=1){const e=`https://vue-course-api.hexschool.io/api/weiwei2022/products?page=${t}`;this.$http.get(e).then((t=>{t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},openModal(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},e),this.isNew=!1),this.myModal.show()},updateProduct(){let t="https://vue-course-api.hexschool.io/api/weiwei2022/admin/product",e="post";this.isNew||(t=`https://vue-course-api.hexschool.io/api/weiwei2022/admin/product/${this.tempProduct.id}`,e="put"),this.$http[e](t,{data:this.tempProduct}).then((t=>{t.data.success&&this.myModal.hide(),this.getProducts(),this.products=t.data.products}))},uploadFile(t){const e=t.target.files[0],o=new FormData;o.append("file-to-upload",e);const l="https://vue-course-api.hexschool.io/api/weiwei2022/admin/upload";this.$http.post(l,o,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{t.data.success&&(this.tempProduct.imageUrl=t.data.imageUrl)}))},deleteProduct(t){const e=`https://vue-course-api.hexschool.io/api/weiwei2022/admin/product/${t}`;this.$http.delete(e).then((t=>{console.log("456",t)})),this.getProducts()}},mounted(){this.myModal=new J.u_("#productModal",{})},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");""!==t&&(this.axios.defaults.headers.common["Authorization"]=t,this.getProducts())}},R=o(89);const X=(0,R.Z)(Q,[["render",B]]);var tt=X}}]);
//# sourceMappingURL=514.10243256.js.map
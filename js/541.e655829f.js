"use strict";(self["webpackChunkoats2022"]=self["webpackChunkoats2022"]||[]).push([[541],{6740:function(t,o,e){e.r(o),e.d(o,{default:function(){return H}});var n=e(3396),l=e(7139),a=e(9242);const i={class:"container-fluid content"},s={class:"container"},d={class:"text-end"},u={class:"table mt-4"},p=(0,n._)("thead",null,[(0,n._)("tr",{class:"text-center"},[(0,n._)("th",null,"名稱"),(0,n._)("th",null,"折扣碼"),(0,n._)("th",null,"折扣百分比"),(0,n._)("th",null,"到期日"),(0,n._)("th",null,"是否啟用"),(0,n._)("th",null,"編輯"),(0,n._)("th",null,"刪除")])],-1),c={key:0},r={key:1},h=["onClick"],m={class:"text-center"},_=["onClick"],f={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},b={class:"modal-dialog modal-lg",role:"document"},g={class:"modal-content border-0"},C=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,n._)("span",null,"新增優惠券")])],-1),w={class:"modal-body row"},k={class:"col-8"},v={class:"form-floating mb-3"},y=(0,n._)("label",{for:"floatingInput"},"名稱",-1),x={class:"col-6"},M={class:"form-floating mb-3"},$=(0,n._)("label",{for:"floatingInput"},"折扣碼",-1),D={class:"form-floating mb-3"},I=(0,n._)("label",{for:"floatingInput"},"折扣百分比",-1),N={class:"form-floating mb-3"},V=(0,n._)("label",{for:"floatingInput"},"到期日",-1),z={class:"form-check form-switch text-start"},U=(0,n._)("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"是否啟用",-1),P={class:"modal-footer"};function G(t,o,e,G,L,S){const Z=(0,n.up)("PagiNation");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",s,[(0,n._)("div",d,[(0,n._)("button",{class:"btn btn-dark",onClick:o[0]||(o[0]=t=>S.openModal(!0))}," 新增優惠券 ")]),(0,n._)("table",u,[p,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(L.coupons,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id,class:"text-center"},[(0,n._)("td",null,(0,l.zw)(t.title),1),(0,n._)("td",null,(0,l.zw)(t.code),1),(0,n._)("td",null,(0,l.zw)(t.percent+" %"),1),(0,n._)("td",null,(0,l.zw)(t.due_date),1),t.is_enabled?((0,n.wg)(),(0,n.iD)("td",c,"已啟用")):((0,n.wg)(),(0,n.iD)("td",r,"未啟用")),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-outline-dark",onClick:o=>S.openModal(!1,t)}," 編輯 ",8,h)]),(0,n._)("td",m,[(0,n._)("button",{class:"btn btn-outline-danger",onClick:o=>S.deleteCoupon(t.id)}," 刪除 ",8,_)])])))),128))])]),(0,n.Wm)(Z,{pagination:L.pagination,onGetProducts:S.getCoupons},null,8,["pagination","onGetProducts"])]),(0,n._)("div",f,[(0,n._)("div",b,[(0,n._)("div",g,[C,(0,n._)("div",w,[(0,n._)("div",k,[(0,n._)("div",v,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入優惠券名稱","onUpdate:modelValue":o[1]||(o[1]=t=>L.tempCoupon.title=t)},null,512),[[a.nr,L.tempCoupon.title]]),y]),(0,n._)("div",x,[(0,n._)("div",M,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入折扣碼","onUpdate:modelValue":o[2]||(o[2]=t=>L.tempCoupon.code=t)},null,512),[[a.nr,L.tempCoupon.code]]),$]),(0,n._)("div",D,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"請輸入折扣百分比","onUpdate:modelValue":o[3]||(o[3]=t=>L.tempCoupon.percent=t)},null,512),[[a.nr,L.tempCoupon.percent]]),I]),(0,n._)("div",N,[(0,n.wy)((0,n._)("input",{type:"date",class:"form-control",id:"date",name:"date","onUpdate:modelValue":o[4]||(o[4]=t=>L.tempCoupon.due_date=t)},null,512),[[a.nr,L.tempCoupon.due_date]]),V])]),(0,n._)("div",z,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":o[5]||(o[5]=t=>L.tempCoupon.is_enabled=t)},null,512),[[a.e8,L.tempCoupon.is_enabled]]),U])])]),(0,n._)("div",P,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:o[6]||(o[6]=(...t)=>S.updateCoupon&&S.updateCoupon(...t))}," 確認 ")])])])])])}var L=e(7208),S=e(2166),Z={components:{PagiNation:L.Z},data(){return{pagination:{},coupons:[],tempCoupon:{},myModal:{},isNew:!1}},name:"CouponView",methods:{getCoupons(t=1){const o=`https://vue-course-api.hexschool.io/api/weiwei2022/admin/coupons?page=${t}`;this.$http.get(o).then((t=>{this.coupons=t.data.coupons,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},openModal(t,o){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=Object.assign({},o),this.isNew=!1),this.myModal.show()},updateCoupon(){let t="https://vue-course-api.hexschool.io/api/weiwei2022/admin/coupon",o="post";this.isNew||(t=`https://vue-course-api.hexschool.io/api/weiwei2022/admin/coupon/${this.tempCoupon.id}`,o="put"),this.$http[o](t,{data:this.tempCoupon}).then((t=>{console.log("123",t),t.data.success&&this.myModal.hide(),this.getCoupons()}))},deleteCoupon(t){const o=`https://vue-course-api.hexschool.io/api/weiwei2022/admin/coupon/${t}`;this.$http.delete(o).then((()=>{})),this.getCoupons()}},mounted(){this.myModal=new S.u_("#couponModal",{})},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");""!==t&&(this.axios.defaults.headers.common["Authorization"]=t,this.getCoupons())}},j=e(89);const A=(0,j.Z)(Z,[["render",G]]);var H=A}}]);
//# sourceMappingURL=541.e655829f.js.map
{"version":3,"file":"js/541.e655829f.js","mappings":"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","sources":["webpack://oats2022/./src/views/CouponView.vue","webpack://oats2022/./src/views/CouponView.vue?83d7"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid content\">\r\n    <div class=\"container\">\r\n      <div class=\"text-end\">\r\n        <button class=\"btn btn-dark\" @click=\"openModal(true)\">\r\n          新增優惠券\r\n        </button>\r\n      </div>\r\n      <table class=\"table mt-4\">\r\n        <thead>\r\n          <tr class=\"text-center\">\r\n            <th>名稱</th>\r\n            <th>折扣碼</th>\r\n            <th>折扣百分比</th>\r\n            <th>到期日</th>\r\n            <th>是否啟用</th>\r\n            <th>編輯</th>\r\n            <th>刪除</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in coupons\" :key=\"item.id\" class=\"text-center\">\r\n            <td>{{ item.title }}</td>\r\n            <td>{{ item.code }}</td>\r\n            <td>{{ item.percent + \" %\" }}</td>\r\n            <td>{{ item.due_date }}</td>\r\n            <td v-if=\"item.is_enabled\">已啟用</td>\r\n            <td v-else>未啟用</td>\r\n            <td>\r\n              <button\r\n                class=\"btn btn-outline-dark\"\r\n                @click=\"openModal(false, item)\"\r\n              >\r\n                編輯\r\n              </button>\r\n            </td>\r\n            <td class=\"text-center\">\r\n              <button\r\n                class=\"btn btn-outline-danger\"\r\n                @click=\"deleteCoupon(item.id)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <!-- pagination -->\r\n      <PagiNation\r\n        :pagination=\"pagination\"\r\n        @getProducts=\"getCoupons\"\r\n      ></PagiNation>\r\n    </div>\r\n\r\n    <!-- 新增優惠券 Modal -->\r\n    <div\r\n      class=\"modal fade\"\r\n      id=\"couponModal\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-lg\" role=\"document\">\r\n        <div class=\"modal-content border-0\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n              <span>新增優惠券</span>\r\n            </h5>\r\n          </div>\r\n\r\n          <div class=\"modal-body row\">\r\n            <div class=\"col-8\">\r\n              <div class=\"form-floating mb-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"floatingInput\"\r\n                  placeholder=\"請輸入優惠券名稱\"\r\n                  v-model=\"tempCoupon.title\"\r\n                />\r\n                <label for=\"floatingInput\">名稱</label>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-floating mb-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"floatingInput\"\r\n                    placeholder=\"請輸入折扣碼\"\r\n                    v-model=\"tempCoupon.code\"\r\n                  />\r\n                  <label for=\"floatingInput\">折扣碼</label>\r\n                </div>\r\n\r\n                <div class=\"form-floating mb-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"floatingInput\"\r\n                    placeholder=\"請輸入折扣百分比\"\r\n                    v-model=\"tempCoupon.percent\"\r\n                  />\r\n                  <label for=\"floatingInput\">折扣百分比</label>\r\n                </div>\r\n\r\n                <div class=\"form-floating mb-3\">\r\n                  <input\r\n                    type=\"date\"\r\n                    class=\"form-control\"\r\n                    id=\"date\"\r\n                    name=\"date\"\r\n                    v-model=\"tempCoupon.due_date\"\r\n                  />\r\n                  <label for=\"floatingInput\">到期日</label>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-check form-switch text-start\">\r\n                <input\r\n                  class=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  id=\"flexSwitchCheckDefault\"\r\n                  v-model=\"tempCoupon.is_enabled\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\"\r\n                  >是否啟用</label\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateCoupon\">\r\n              確認\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PagiNation from \"@/components/PagiNation.vue\";\r\nimport { Modal } from \"bootstrap\";\r\n\r\nexport default {\r\n  components: {\r\n    PagiNation,\r\n  },\r\n  data() {\r\n    return {\r\n      pagination: {},\r\n      coupons: [],\r\n      tempCoupon: {},\r\n      myModal: {},\r\n      isNew: false,\r\n    };\r\n  },\r\n  name: \"CouponView\",\r\n  methods: {\r\n    getCoupons(page = 1) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupons?page=${page}`;\r\n      this.$http.get(api).then((response) => {\r\n        this.coupons = response.data.coupons;\r\n        if (response.data.success) {\r\n          this.products = response.data.products;\r\n          this.pagination = response.data.pagination;\r\n        }\r\n      });\r\n    },\r\n    openModal(isNew, item) {\r\n      if (isNew) {\r\n        this.tempCoupon = {};\r\n        this.isNew = true;\r\n      } else {\r\n        this.tempCoupon = Object.assign({}, item);\r\n        this.isNew = false;\r\n      }\r\n      this.myModal.show();\r\n    },\r\n    updateCoupon() {\r\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupon`;\r\n      let httpMethod = \"post\";\r\n\r\n      if (!this.isNew) {\r\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n        httpMethod = \"put\";\r\n      }\r\n\r\n      this.$http[httpMethod](api, { data: this.tempCoupon }).then(\r\n        (response) => {\r\n          console.log(\"123\", response);\r\n          if (response.data.success) {\r\n            this.myModal.hide();\r\n          }\r\n          this.getCoupons();\r\n        }\r\n      );\r\n    },\r\n    deleteCoupon(id) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_CUSTOM_PATH}/admin/coupon/${id}`;\r\n      this.$http.delete(url).then(() => {});\r\n      this.getCoupons();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.myModal = new Modal(\"#couponModal\", {});\r\n  },\r\n  created() {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    if (token !== \"\") {\r\n      this.axios.defaults.headers.common[\"Authorization\"] = token;\r\n      this.getCoupons();\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.container {\r\n  margin-top: 100px;\r\n  border-radius: 10px;\r\n  background-color: white;\r\n  padding: 50px;\r\n}\r\n</style>\r\n","import { render } from \"./CouponView.vue?vue&type=template&id=074ce3bc\"\nimport script from \"./CouponView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponView.vue?vue&type=script&lang=js\"\n\nimport \"./CouponView.vue?vue&type=style&index=0&id=074ce3bc&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\pc\\\\Desktop\\\\Oats2022\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","tabindex","role","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","$options","_hoisted_4","_hoisted_5","_Fragment","$data","item","key","title","code","percent","due_date","is_enabled","_hoisted_9","_createVNode","_component_PagiNation","pagination","onGetProducts","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","type","placeholder","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","name","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","components","PagiNation","data","coupons","tempCoupon","myModal","isNew","methods","getCoupons","page","api","this","$http","get","then","response","success","products","openModal","Object","assign","show","updateCoupon","httpMethod","console","log","hide","deleteCoupon","url","delete","mounted","Modal","created","token","document","cookie","replace","axios","defaults","headers","common","__exports__","render"],"sourceRoot":""}